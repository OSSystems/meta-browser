Signed-off-by: Zoltán Böszörményi <zboszor@gmail.com>
Upstream-Status: Inappropriate [CLANG 20 specific]

--- chromium-136.0.7103.113/third_party/rust-src/src/llvm-project/llvm/utils/gn/build/BUILD.gn.old	2025-09-09 12:40:27.842667547 +0200
+++ chromium-136.0.7103.113/third_party/rust-src/src/llvm-project/llvm/utils/gn/build/BUILD.gn	2025-09-09 12:41:30.112009903 +0200
@@ -271,11 +271,6 @@
     }
   }
 
-  # On Windows, the linker is not invoked through the compiler driver.
-  if (use_lld && current_os != "win") {
-    ldflags += [ "-fuse-ld=lld" ]
-  }
-
   if (llvm_build_instrumented_coverage) {
     cflags += [
       "-fcoverage-mapping",
--- chromium-136.0.7103.113/third_party/perfetto/gn/standalone/toolchain/BUILD.gn.old	2025-09-09 12:40:23.179245164 +0200
+++ chromium-136.0.7103.113/third_party/perfetto/gn/standalone/toolchain/BUILD.gn	2025-09-09 12:42:05.799617038 +0200
@@ -236,10 +236,6 @@
     external_cxxflags = ""
     external_ldflags = ""
     strip = ""
-    if (defined(invoker.linker) && invoker.linker != "") {
-      _invoker_linker = invoker.linker
-      ld_arg = "-fuse-ld=$_invoker_linker"
-    }
     if (defined(invoker.sysroot) && invoker.sysroot != "") {
       _invoker_sysroot = invoker.sysroot
       cc = "$cc --sysroot=$_invoker_sysroot"
--- chromium-136.0.7103.113/third_party/llvm/llvm/utils/gn/build/BUILD.gn.old	2025-09-09 12:40:17.058515953 +0200
+++ chromium-136.0.7103.113/third_party/llvm/llvm/utils/gn/build/BUILD.gn	2025-09-09 12:42:11.424555115 +0200
@@ -271,11 +271,6 @@
     }
   }
 
-  # On Windows, the linker is not invoked through the compiler driver.
-  if (use_lld && current_os != "win") {
-    ldflags += [ "-fuse-ld=lld" ]
-  }
-
   if (llvm_build_instrumented_coverage) {
     cflags += [
       "-fcoverage-mapping",
--- chromium-136.0.7103.113/third_party/instrumented_libs/noble/BUILD.gn.old	2025-09-09 12:40:12.186545761 +0200
+++ chromium-136.0.7103.113/third_party/instrumented_libs/noble/BUILD.gn	2025-09-09 12:42:18.327479124 +0200
@@ -121,7 +121,6 @@
     ]
     package_ldflags = [
       "-fsanitize=memory",
-      "-fuse-ld=lld",
       "-Wl,--wrap=stat",
       "-Wl,--wrap=fstat",
       "-Wl,--wrap=lstat",
--- chromium-136.0.7103.113/build/config/compiler/BUILD.gn.old	2025-09-09 12:40:05.242765741 +0200
+++ chromium-136.0.7103.113/build/config/compiler/BUILD.gn	2025-09-09 12:42:37.847264237 +0200
@@ -387,13 +387,6 @@
       }
     }
 
-    if (use_lld) {
-      ldflags += [ "-fuse-ld=lld" ]
-      if (lld_path != "") {
-        ldflags += [ "-B$lld_path" ]
-      }
-    }
-
     # Linker warnings.
     if (fatal_linker_warnings && !is_apple && current_os != "aix" &&
         current_os != "zos") {
